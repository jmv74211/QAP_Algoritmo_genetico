#include "individual.h"
#include <cstdlib>
#include <iostream>

using namespace std;

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

Individual::Individual(){

    this->seed = 1;
    this->size = 0;
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

Individual::Individual(Data data, int seed){

    this->seed = seed;

    this->size = data.getSize(); // ?

    this->initialize();

    this->calculateCost(data);

}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void Individual::calculateCost(Data &data){

    int accumulator = 0;

    for(int i = 0; i < this->size; ++i){
        for(int j = 0; j < this->size; ++j){
            if(i!=j){
                accumulator += data.getFactory(i,j)*data.getDistance(this->solutions[i],this->solutions[j]);
            }
        }
    }

    this->setCost(accumulator);
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void Individual::initialize(){

    int exchanger = 0;
    int random = 0;
    int max = (this->size-1);
    int min = 0;

    srand(this->seed);

    for(int i = 0; i < this->size ; ++i){
        this->solutions.push_back(i);
    }

    for(unsigned i = 0; i < this->solutions.size(); ++i){
        for(unsigned j = 0; j < max; ++j){
            min = j;
            random = rand() % max;
            exchanger = this->solutions[i];
            this->solutions[i] = this->solutions[random];
            this->solutions[random] = exchanger;
        }
    }

    this->size = this->solutions.size();
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void Individual::print(){

    for(int i = 0; i < this->size; ++i ){
        cout << this->solutions[i] << " ";
    }
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

int Individual::getCost(){

    return this->cost;
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void Individual::setCost(int newCost){

    if(newCost > 0)
        this->cost = newCost;
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////


int Individual::getSeed(){

    return this->seed;
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void Individual::setSeed(int newSeed){

    if(newSeed > 0)
        this->seed = newSeed;
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

vector<int> Individual::getVectorSolutions(){

    return this->solutions;
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void Individual::setVectorSolutions(int value, int position){
    if(position >= 0 && value >= 0)
        this->solutions[position] = value;
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

bool Individual::operator<(Individual &compareIndividual){

    return (this->cost < compareIndividual.getCost());
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

bool Individual::operator>(Individual &compareIndividual){

    return (this->cost > compareIndividual.getCost());
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

bool Individual::operator==(Individual &compareIndividual){

    return (this->cost == compareIndividual.getCost());
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

